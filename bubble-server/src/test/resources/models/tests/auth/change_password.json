[
  {
    "comment": "change root password. no policy defined, so this works"
  },

  {
    "comment": "logout"
  },

  {
    "comment": "try to login with old password, fails"
  },

  {
    "comment": "try to login with new password, succeeds"
  },

  {
    "comment": "create a non-admin user"
  },

  {
    "comment": "login as non-admin user, verify works"
  },

  {
    "comment": "as root, change non-admin user password, invalidates all sessions"
  },

  {
    "comment": "as non-admin user, try to get profile, fails because session has been invalided"
  },

  {
    "comment": "as non-admin user, try to login with old password, fails"
  },

  {
    "comment": "as non-admin user, try to login with new password, succeeds"
  },

  {
    "comment": "as non-admin user, change password, requires email auth"
  },

  {
    "comment": "as root, check inbox, get confirmation code"
  },

  {
    "comment": "as non-admin user, approve change password request without sending password, receive error"
  },

  {
    "comment": "as non-admin user, approve change password request and send password, succeeds"
  },

  {
    "comment": "as non-admin user, login with new password, succeeds"
  },

  {
    "comment": "as non-admin user, update profile, set email as not required for account operations"
  },

  {
    "comment": "as non-admin user, change password, succeeds with no auth required"
  },

  {
    "comment": "as non-admin user, login again with new password, succeeds"
  },

  {
    "comment": "as non-admin user, add authenticator as required for account operations"
  },

  {
    "comment": "as non-admin user, change password, fails because authenticator token is required"
  },

  {
    "comment": "as non-admin user, change password, and send authenticator token, succeeds"
  },

  {
    "comment": "as root user, create another admin user"
  },

  {
    "comment": "login as second admin, verify OK"
  },

  {
    "comment": "as root user, try to change admin user password without sending current password, fails"
  },

  {
    "comment": "as root user, try to change admin user password sending current password, succeeds"
  },

  {
    "comment": "login as second admin with old password, verify failure"
  },

  {
    "comment": "login as second admin with new password, verify OK"
  }
]