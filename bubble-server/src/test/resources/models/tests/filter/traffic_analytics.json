[
  {
    "comment": "fake a request to website foo.example.com/bar",
    "include": "fake_filter",
    "params": {
      "fqdn": "foo.example.com",
      "uri": "/bar",
      "jsCheck": "json.getMatchers().length == 0"
    }
  },

  {
    "comment": "fake a second request to foo.example.com/baz",
    "include": "fake_filter",
    "params": {
      "fqdn": "foo.example.com",
      "uri": "/baz",
      "jsCheck": "json.getMatchers().length == 0"
    }
  },

  {
    "comment": "fake a third request to bar.example.com/qux",
    "include": "fake_filter",
    "params": {
      "fqdn": "bar.example.com",
      "uri": "/qux",
      "jsCheck": "json.getMatchers().length == 0"
    }
  },

  {
    "comment": "get AppData for analytics app",
    "request": { "uri": "me/apps/TrafficAnalytics/data" },
    "response": {
      "check": [
        {"condition": "json.length == 4"},
        {"condition": "_find(json, function (d) { return d.getKey().startsWith('log_all_foo.example.com') }) != null"},
        {"condition": "_find(json, function (d) { return d.getKey().startsWith('log_all_foo.example.com') }).getData() == 2"},
        {"condition": "_find(json, function (d) { return d.getKey().startsWith('log_all_bar.example.com') }) != null"},
        {"condition": "_find(json, function (d) { return d.getKey().startsWith('log_all_bar.example.com') }).getData() == 1"}
      ]
    }
  }
]