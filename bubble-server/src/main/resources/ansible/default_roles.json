[
  {
    "name": "common-0.0.1",
    "priority": 100,
    "template": true,
    "config": [
      {"name": "hostname", "value": "[[node.fqdn]]"}
    ],
    "tgzB64": ""
  },
  {
    "name": "firewall-0.0.1",
    "priority": 200,
    "template": true,
    "config": [
      {"name": "ssl_port", "value": "[[node.sslPort]]"},
      {"name": "admin_port", "value": "[[node.adminPort]]"},
      {"name": "dns_port", "value": "[[configuration.dnsPort]]"}
    ],
    "tgzB64": ""
  },
  {
    "name": "bubble-0.0.1",
    "priority": 300,
    "template": true,
    "config": [
      {"name": "node_uuid", "value": "[[node.uuid]]"},
      {"name": "network_uuid", "value": "[[node.network]]"},
      {"name": "admin_port", "value": "[[node.adminPort]]"},
      {"name": "ssl_port", "value": "[[node.sslPort]]"},
      {"name": "public_base_uri", "value": "[[publicBaseUri]]"},
      {"name": "sage_node", "value": "[[sageNode]]"},
      {"name": "promo_code_policy", "value": "[[#compare fork '==' true]][[configuration.promoCodePolicy]][[else]]disabled[[/compare]]"},
      {"name": "install_type", "value": "[[installType]]"},
      {"name": "default_locale", "value": "[[network.locale]]"},
      {"name": "time_zone", "value": "[[network.timezone]]"},
      {"name": "bubble_version", "value": "[[configuration.version]]"},
      {"name": "bubble_host", "value": "[[node.fqdn]]"},
      {"name": "bubble_cname", "value": "[[network.networkDomain]]"},
      {"name": "admin_user", "value": "[[node.ansibleUser]]"},
      {"name": "db_encoding", "value": "UTF-8"},
      {"name": "db_locale", "value": "en_US"},
      {"name": "db_user", "value": "bubble"},
      {"name": "db_name", "value": "bubble"},
      {"name": "db_key", "value": "[[dbEncryptionKey]]"},
      {"name": "letsencrypt_email", "value": "[[configuration.letsencryptEmail]]"},
      {"name": "is_fork", "value": "[[fork]]"},
      {"name": "restore_key", "value": "[[restoreKey]]"},
      {"name": "restore_timeout", "value": "[[restoreTimeoutSeconds]]"},
      {"name": "test_mode", "value": "[[testMode]]"},
      {"name": "error_url", "value": "[[error_url]]"},
      {"name": "error_key", "value": "[[error_key]]"},
      {"name": "error_env", "value": "[[error_env]]"}
    ],
    "optionalConfigNames": ["restore_key", "restore_timeout", "error_url", "error_key", "error_env"],
    "tgzB64": ""
  },
  {
    "name": "algo-0.0.1",
    "priority": 400,
    "template": true,
    "install": "node",
    "config": [
      {"name": "server_name", "value": "[[node.fqdn]]"},
      {"name": "endpoint", "value": "[[node.ip4]]"},
      {"name": "dns_port", "value": "[[configuration.dnsPort]]"},
      {"name": "ssl_port", "value": "[[node.sslPort]]"}
    ],
    "tgzB64": ""
  },
  {
    "name": "nginx-0.0.1",
    "priority": 500,
    "template": true,
    "config": [
      {"name": "server_name", "value": "[[node.fqdn]]"},
      {"name": "letsencrypt_email", "value": "[[configuration.letsencryptEmail]]"},
      {"name": "ssl_port", "value": "[[node.sslPort]]"},
      {"name": "admin_port", "value": "[[node.adminPort]]"}
    ],
    "tgzB64": ""
  },
  {
    "name": "mitmproxy-0.0.1",
    "priority": 600,
    "template": true,
    "install": "node",
    "config": [
      {"name": "admin_port", "value": "[[node.adminPort]]"},
      {"name": "bubble_network", "value": "[[node.network]]"},
      {"name": "mitm_port", "value": "[[configuration.defaultMitmProxyPort]]"}
    ],
    "tgzB64": ""
  },
  {
    "name": "bubble_finalizer-0.0.1",
    "priority": 9999999,
    "template": true,
    "config": [
      {"name": "server_alias", "value": "[[network.networkDomain]]"},
      {"name": "restore_key", "value": "[[restoreKey]]"},
      {"name": "install_type", "value": "[[installType]]"},
      {"name": "bubble_java_opts", "value": "-Xms[[expr nodeSize.memoryMB '//' 2]]m -Xmx[[expr nodeSize.memoryMB '//' 2]]m"}
    ],
    "optionalConfigNames": ["restore_key"],
    "tgzB64": ""
  }
]